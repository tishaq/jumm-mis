{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nvar _jsxFileName = \"/home/ahmedt/ajisaq/jumm-mis/pages/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport * as queries from \"../src/graphql/queries\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\n\nconst index = props => __jsx(React.Fragment, null, console.log(props), __jsx(\"div\", {\n  className: \"header\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, __jsx(\"h1\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 11\n  },\n  __self: this\n}, \"Jimeta Ultra Modern Market Transaction Sumarry\")), __jsx(\"div\", {\n  className: \"main\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14\n  },\n  __self: this\n}, __jsx(\"div\", {\n  className: \"card\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15\n  },\n  __self: this\n}, __jsx(\"div\", {\n  className: \"card-title\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}, \"Tickets Daily Summary\"), __jsx(\"div\", {\n  className: \"card-body\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}, __jsx(\"table\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}, __jsx(\"thead\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19\n  },\n  __self: this\n}, __jsx(\"tr\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n}, __jsx(\"th\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21\n  },\n  __self: this\n}, \"S/N\"), __jsx(\"th\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22\n  },\n  __self: this\n}, \"Item Name\"), __jsx(\"th\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 23\n  },\n  __self: this\n}, \"Amount\"))), __jsx(\"tbody\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 26\n  },\n  __self: this\n}, _Object$entries(props.data).map((item, index) => __jsx(\"tr\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 28\n  },\n  __self: this\n}, __jsx(\"td\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 29\n  },\n  __self: this\n}, index + 1), __jsx(\"td\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 30\n  },\n  __self: this\n}, item[0]), __jsx(\"td\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 31\n  },\n  __self: this\n}, \"N\", item[1].reduce((x, y) => x + y)))))))), __jsx(\"div\", {\n  className: \"card\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 38\n  },\n  __self: this\n}, __jsx(\"div\", {\n  className: \"card-title\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 39\n  },\n  __self: this\n}, \"Tickets Monthly Summary\"), __jsx(\"div\", {\n  className: \"card-body\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 40\n  },\n  __self: this\n}, __jsx(\"table\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 41\n  },\n  __self: this\n}, __jsx(\"thead\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 42\n  },\n  __self: this\n}, __jsx(\"tr\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 43\n  },\n  __self: this\n}, __jsx(\"th\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 44\n  },\n  __self: this\n}, \"S/N\"), __jsx(\"th\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 45\n  },\n  __self: this\n}, \"Item Name\"), __jsx(\"th\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 46\n  },\n  __self: this\n}, \"Amount\"))), __jsx(\"tbody\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 49\n  },\n  __self: this\n}, _Object$entries(props.data).map((item, index) => __jsx(\"tr\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 51\n  },\n  __self: this\n}, __jsx(\"td\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 52\n  },\n  __self: this\n}, index + 1), __jsx(\"td\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 53\n  },\n  __self: this\n}, item[0]), __jsx(\"td\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 54\n  },\n  __self: this\n}, \"N\", item[1].reduce((x, y) => x + y)))))))), __jsx(\"div\", {\n  className: \"card\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 61\n  },\n  __self: this\n}, __jsx(\"div\", {\n  className: \"card-title\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 62\n  },\n  __self: this\n}, \"Facility Daily Summary\"), __jsx(\"div\", {\n  className: \"card-body\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 63\n  },\n  __self: this\n}, __jsx(\"canvas\", {\n  id: \"last-seven-days\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 64\n  },\n  __self: this\n}))), __jsx(\"div\", {\n  className: \"card\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 67\n  },\n  __self: this\n}, __jsx(\"div\", {\n  className: \"card-title\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 68\n  },\n  __self: this\n}, \"Facility Monthly Summary\"), __jsx(\"div\", {\n  className: \"card-body\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 69\n  },\n  __self: this\n}, __jsx(\"canvas\", {\n  id: \"last-thirty-days\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 70\n  },\n  __self: this\n})))));\n\nindex.getInitialProps = async function () {\n  let nextToken = null;\n  let results = [];\n  let errors;\n  let raw = {};\n  let tickets = {};\n\n  try {\n    do {\n      raw = await API.graphql(graphqlOperation(queries.listTickets, {\n        limit: 10000,\n        nextToken: nextToken\n      }));\n      nextToken = raw.data.listTickets.nextToken;\n      raw.data.listTickets.items.map(value => results.push(value));\n    } while (nextToken);\n  } catch (error) {\n    errors = error;\n  }\n\n  results.map(t => {\n    if (!tickets[t.deviceName]) {\n      tickets[t.deviceName] = [];\n    }\n\n    tickets[t.deviceName].push(_parseInt(t.fee));\n  });\n  let facilities = {};\n  results = [];\n\n  try {\n    do {\n      raw = await API.graphql(graphqlOperation(queries.listFacilitys, {\n        limit: 10000,\n        nextToken: nextToken\n      }));\n      nextToken = raw.data.listFacilitys.nextToken;\n      raw.data.listFacilitys.items.map(value => results.push(value));\n    } while (nextToken);\n  } catch (error) {\n    errors = error;\n  }\n\n  results.map(f => {\n    if (!facilities[f.facilityType]) {\n      facilities[f.facilityType] = [];\n      facilities[f.facilityType].push(f);\n    } else {\n      facilities[f.facilityType].push(f);\n    }\n  });\n  return {\n    tickets: tickets,\n    facilities: facilities,\n    errors: errors\n  };\n};\n\nexport default index;","map":{"version":3,"sources":["/home/ahmedt/ajisaq/jumm-mis/pages/index.js"],"names":["React","Component","API","graphqlOperation","queries","Header","Footer","index","props","console","log","data","map","item","reduce","x","y","getInitialProps","nextToken","results","errors","raw","tickets","graphql","listTickets","limit","items","value","push","error","t","deviceName","fee","facilities","listFacilitys","f","facilityType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport * as queries from \"../src/graphql/queries\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\n\nconst index = props => (\n  <>\n    {console.log(props)}\n    <div className=\"header\">\n      <h1>Jimeta Ultra Modern Market Transaction Sumarry</h1>\n    </div>\n\n    <div className=\"main\">\n      <div className=\"card\">\n        <div className=\"card-title\">Tickets Daily Summary</div>\n        <div className=\"card-body\">\n          <table>\n            <thead>\n              <tr>\n                <th>S/N</th>\n                <th>Item Name</th>\n                <th>Amount</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(props.data).map((item, index) => (\n                <tr>\n                  <td>{index + 1}</td>\n                  <td>{item[0]}</td>\n                  <td>N{item[1].reduce((x, y) => x + y)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      <div className=\"card\">\n        <div className=\"card-title\">Tickets Monthly Summary</div>\n        <div className=\"card-body\">\n          <table>\n            <thead>\n              <tr>\n                <th>S/N</th>\n                <th>Item Name</th>\n                <th>Amount</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(props.data).map((item, index) => (\n                <tr>\n                  <td>{index + 1}</td>\n                  <td>{item[0]}</td>\n                  <td>N{item[1].reduce((x, y) => x + y)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      <div className=\"card\">\n        <div className=\"card-title\">Facility Daily Summary</div>\n        <div className=\"card-body\">\n          <canvas id=\"last-seven-days\"></canvas>\n        </div>\n      </div>\n      <div className=\"card\">\n        <div className=\"card-title\">Facility Monthly Summary</div>\n        <div className=\"card-body\">\n          <canvas id=\"last-thirty-days\"></canvas>\n        </div>\n      </div>\n    </div>\n  </>\n);\nindex.getInitialProps = async function() {\n  let nextToken = null;\n  let results = [];\n  let errors;\n  let raw = {};\n  let tickets = {};\n  try {\n    do {\n      raw = await API.graphql(\n        graphqlOperation(queries.listTickets, {\n          limit: 10000,\n          nextToken: nextToken\n        })\n      );\n      nextToken = raw.data.listTickets.nextToken;\n      raw.data.listTickets.items.map(value => results.push(value));\n    } while (nextToken);\n  } catch (error) {\n    errors = error;\n  }\n  results.map(t => {\n    if (!tickets[t.deviceName]) {\n      tickets[t.deviceName] = [];\n    }\n    tickets[t.deviceName].push(parseInt(t.fee));\n  });\n\n  let facilities = {};\n  results = [];\n  try {\n    do {\n      raw = await API.graphql(\n        graphqlOperation(queries.listFacilitys, {\n          limit: 10000,\n          nextToken: nextToken\n        })\n      );\n      nextToken = raw.data.listFacilitys.nextToken;\n      raw.data.listFacilitys.items.map(value => results.push(value));\n    } while (nextToken);\n  } catch (error) {\n    errors = error;\n  }\n  results.map(f => {\n    if (!facilities[f.facilityType]) {\n      facilities[f.facilityType] = [];\n      facilities[f.facilityType].push(f);\n    } else {\n      facilities[f.facilityType].push(f);\n    }\n  });\n\n  return { tickets: tickets, facilities: facilities, errors: errors };\n};\nexport default index;\n"]},"metadata":{},"sourceType":"module"}