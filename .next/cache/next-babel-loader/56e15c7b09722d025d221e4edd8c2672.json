{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ahmedt/ajisaq/jumm-mis/pages/gate.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport * as queries from \"../src/graphql/queries\";\n\nvar gate =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(gate, _Component);\n\n  function gate() {\n    _classCallCheck(this, gate);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(gate).apply(this, arguments));\n  }\n\n  _createClass(gate, [{\n    key: \"render\",\n    //static async getInitialProps() {}\n    value: function render() {\n      return __jsx(React.Fragment, null, console.log(this.props), __jsx(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 10\n        },\n        __self: this\n      }, __jsx(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 11\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"search-items\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 12\n        },\n        __self: this\n      }, __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 13\n        },\n        __self: this\n      }, \"Select the range of dates to view summary Maximum of 30 days\"), __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17\n        },\n        __self: this\n      }, \"From:\", __jsx(\"input\", {\n        name: \"datepicker1\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19\n        },\n        __self: this\n      }), \"To:\", __jsx(\"input\", {\n        name: \"datepicker2\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        name: \"load\",\n        type: \"button\",\n        value: \"Load\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }))))), __jsx(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, _Object$entries(this.props.data).map(function (tck) {\n        return __jsx(\"div\", {\n          className: \"card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          className: \"card-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        }, tck[0]), __jsx(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, __jsx(\"table\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }, __jsx(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, __jsx(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, __jsx(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"S/N\"), __jsx(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, \"Item Name\"), __jsx(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, \"Fee\"), __jsx(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }, \"Quantity\"), __jsx(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, \"Amount\"))), _Object$entries(tck[1]).map(function (cat) {\n          return __jsx(\"tbody\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 45\n            },\n            __self: this\n          }, __jsx(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 46\n            },\n            __self: this\n          }, __jsx(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 47\n            },\n            __self: this\n          }, cat[0]), __jsx(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48\n            },\n            __self: this\n          }), __jsx(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          }), __jsx(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 50\n            },\n            __self: this\n          }), __jsx(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 51\n            },\n            __self: this\n          })), _Object$entries(cat[1]).map(function (item, index) {\n            return __jsx(\"tr\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 54\n              },\n              __self: this\n            }, __jsx(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 55\n              },\n              __self: this\n            }, index + 1), __jsx(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 56\n              },\n              __self: this\n            }, item[0]), __jsx(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 57\n              },\n              __self: this\n            }, item[1][0]), __jsx(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 58\n              },\n              __self: this\n            }, item[1].length), __jsx(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59\n              },\n              __self: this\n            }));\n          }));\n        }))));\n      })));\n    }\n  }]);\n\n  return gate;\n}(Component);\n\ngate.getInitialProps = function _callee() {\n  var nextToken, results, errors, raw, tickets;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          nextToken = null;\n          results = [];\n          raw = {};\n          tickets = {};\n          _context.prev = 4;\n\n        case 5:\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(queries.listTickets, {\n            limit: 10000,\n            nextToken: nextToken\n          })));\n\n        case 7:\n          raw = _context.sent;\n          nextToken = raw.data.listTickets.nextToken;\n          raw.data.listTickets.items.map(function (value) {\n            return results.push(value);\n          });\n\n        case 10:\n          if (nextToken) {\n            _context.next = 5;\n            break;\n          }\n\n        case 11:\n          _context.next = 16;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](4);\n          errors = _context.t0;\n\n        case 16:\n          results.map(function (t) {\n            if (!tickets[t.deviceName]) {\n              tickets[t.deviceName] = {};\n            }\n\n            if (!tickets[t.deviceName][t.receiptType]) {\n              tickets[t.deviceName][t.receiptType] = {};\n            }\n\n            if (!tickets[t.deviceName][t.receiptType][t.itemType]) {\n              tickets[t.deviceName][t.receiptType][t.itemType] = [];\n            }\n\n            tickets[t.deviceName][t.receiptType][t.itemType].push(t.fee);\n          });\n          return _context.abrupt(\"return\", {\n            data: tickets,\n            errors: errors\n          });\n\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[4, 13]]);\n};\n\nexport default gate;","map":{"version":3,"sources":["/home/ahmedt/ajisaq/jumm-mis/pages/gate.js"],"names":["React","Component","API","graphqlOperation","queries","gate","console","log","props","data","map","tck","cat","item","index","length","getInitialProps","nextToken","results","raw","tickets","graphql","listTickets","limit","items","value","push","errors","t","deviceName","receiptType","itemType","fee"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport * as queries from \"../src/graphql/queries\";\nclass gate extends Component {\n  //static async getInitialProps() {}\n  render() {\n    return (\n      <>\n        {console.log(this.props)}\n        <div className=\"header\">\n          <form>\n            <div className=\"search-items\">\n              <p>\n                Select the range of dates to view summary Maximum of 30 days\n              </p>\n\n              <div>\n                From:\n                <input name=\"datepicker1\" type=\"date\" />\n                To:\n                <input name=\"datepicker2\" type=\"date\" />\n                <input name=\"load\" type=\"button\" value=\"Load\" />\n              </div>\n            </div>\n          </form>\n        </div>\n\n        <div className=\"main\">\n          {Object.entries(this.props.data).map(tck => (\n            <div className=\"card\">\n              <div className=\"card-title\">{tck[0]}</div>\n              <div className=\"card-body\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>S/N</th>\n                      <th>Item Name</th>\n                      <th>Fee</th>\n                      <th>Quantity</th>\n                      <th>Amount</th>\n                    </tr>\n                  </thead>\n\n                  {Object.entries(tck[1]).map(cat => (\n                    <tbody>\n                      <tr>\n                        <td>{cat[0]}</td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                      </tr>\n                      {Object.entries(cat[1]).map((item, index) => (\n                        <tr>\n                          <td>{index + 1}</td>\n                          <td>{item[0]}</td>\n                          <td>{item[1][0]}</td>\n                          <td>{item[1].length}</td>\n                          <td></td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  ))}\n                </table>\n              </div>\n            </div>\n          ))}\n        </div>\n      </>\n    );\n  }\n}\ngate.getInitialProps = async function() {\n  let nextToken = null;\n  let results = [];\n  let errors;\n  let raw = {};\n  let tickets = {};\n  try {\n    do {\n      raw = await API.graphql(\n        graphqlOperation(queries.listTickets, {\n          limit: 10000,\n          nextToken: nextToken\n        })\n      );\n      nextToken = raw.data.listTickets.nextToken;\n      raw.data.listTickets.items.map(value => results.push(value));\n    } while (nextToken);\n  } catch (error) {\n    errors = error;\n  }\n  results.map(t => {\n    if (!tickets[t.deviceName]) {\n      tickets[t.deviceName] = {};\n    }\n    if (!tickets[t.deviceName][t.receiptType]) {\n      tickets[t.deviceName][t.receiptType] = {};\n    }\n    if (!tickets[t.deviceName][t.receiptType][t.itemType]) {\n      tickets[t.deviceName][t.receiptType][t.itemType] = [];\n    }\n    tickets[t.deviceName][t.receiptType][t.itemType].push(t.fee);\n  });\n  return { data: tickets, errors: errors };\n};\n\nexport default gate;\n"]},"metadata":{},"sourceType":"module"}